#!/bin/bash

function start {
check
# Copying files
echo "Starting setup .."
sudo chmod +x script.sh
sudo /bin/bash script.sh

#backup of dhcpcd.conf
echo "Making an backup of dhcpcd.conf"
sudo mkdir -p /etc/backup-temp
sudo cp /etc/dhcpcd.conf /etc/backup-temp
}

function write {
#write static IP to dhcpcd.conf
echo "Writing static IP to dhcpcd.conf"
#cat "/bin/setIP/installing" >> "/etc/dhcpcd.conf"
cat "installing" >> "/etc/dhcpcd.conf"
}

function end {
# Delete installing cache
echo "Cleaning up .."
sudo rm -rf /etc/backup-temp
echo "Added static IP"
}


function errorHandle {
#check if error, most cases its because of user privileges
if write; then
end
tput setaf 2; echo "..Please reboot the system before changes take effect"
else
tput setaf 1; echo "Write failed, permission errors?"
echo "Please use sudo command, sudo ./install"
fi
}


function check {
#check if temp folder exist
if [ -d "/etc/backup-temp" ]; then
    sudo rm -rf "/etc/backup-temp"
fi
}

function installer {
if check; then
   start
   priv
   return
   else
   errorHandle
fi
}

installer


#uncomment the lane under to view the dhcpcd.conf
#sudo nano /etc/dhcpcd.conf
